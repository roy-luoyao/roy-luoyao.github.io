<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Roy Luo Yaoâ€˜s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Roy Luo Yaoâ€˜s Blog">
<meta property="og:url" content="https://roy-luoyao.github.io/index.html">
<meta property="og:site_name" content="Roy Luo Yaoâ€˜s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Roy Luo Yao">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Roy Luo Yaoâ€˜s Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Roy Luo Yaoâ€˜s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">A place to share my thoughts and ideas</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS è®¢é˜…"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="æœç´¢"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="æœç´¢"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://roy-luoyao.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-iOS/æœªæ¥è¶‹åŠ¿ä¸ä¸ªäººæˆé•¿å»ºè®®" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/18/iOS/%E6%9C%AA%E6%9D%A5%E8%B6%8B%E5%8A%BF%E4%B8%8E%E4%B8%AA%E4%BA%BA%E6%88%90%E9%95%BF%E5%BB%BA%E8%AE%AE/" class="article-date">
  <time class="dt-published" datetime="2025-07-18T02:48:21.722Z" itemprop="datePublished">2025-07-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://roy-luoyao.github.io/2025/07/18/iOS/%E6%9C%AA%E6%9D%A5%E8%B6%8B%E5%8A%BF%E4%B8%8E%E4%B8%AA%E4%BA%BA%E6%88%90%E9%95%BF%E5%BB%BA%E8%AE%AE/" data-id="cmdcsgd4q0025f3k78qb05hki" data-title="" class="article-share-link"><span class="fa fa-share">åˆ†äº«</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-iOS/CopyOnWrite" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/17/iOS/CopyOnWrite/" class="article-date">
  <time class="dt-published" datetime="2025-07-16T16:00:00.000Z" itemprop="datePublished">2025-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/07/17/iOS/CopyOnWrite/">Copy-on-writeï¼ˆCOWï¼‰</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-ä¸­æ–‡ç­”æ¡ˆ"><a href="#1-ä¸­æ–‡ç­”æ¡ˆ" class="headerlink" title="1. ä¸­æ–‡ç­”æ¡ˆ"></a>1. ä¸­æ–‡ç­”æ¡ˆ</h1><h2 id="1-1-æ¦‚å¿µä¸åŸç†"><a href="#1-1-æ¦‚å¿µä¸åŸç†" class="headerlink" title="1.1 æ¦‚å¿µä¸åŸç†"></a>1.1 æ¦‚å¿µä¸åŸç†</h2><p>Copy-on-writeï¼ˆå†™æ—¶å¤åˆ¶ï¼ŒCOWï¼‰æ˜¯ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œå¤šä¸ªå˜é‡å…±äº«åŒä¸€å†…å­˜ï¼Œåªæœ‰åœ¨å†™æ“ä½œæ—¶æ‰çœŸæ­£å¤åˆ¶ï¼ŒSwift çš„ Arrayã€Dictionaryã€String ç­‰éƒ½é‡‡ç”¨ COWã€‚</p>
<h2 id="1-2-ä»£ç ç¤ºä¾‹"><a href="#1-2-ä»£ç ç¤ºä¾‹" class="headerlink" title="1.2 ä»£ç ç¤ºä¾‹"></a>1.2 ä»£ç ç¤ºä¾‹</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="operator">=</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">var</span> b <span class="operator">=</span> a <span class="comment">// æœªå¤åˆ¶ï¼Œa/b å…±ç”¨å†…å­˜</span></span><br><span class="line">b[<span class="number">0</span>] <span class="operator">=</span> <span class="number">9</span> <span class="comment">// æ­¤æ—¶ b æ‰å¤åˆ¶ï¼Œa ä¸å˜</span></span><br></pre></td></tr></table></figure>

<h2 id="1-3-ä¸šåŠ¡åœºæ™¯"><a href="#1-3-ä¸šåŠ¡åœºæ™¯" class="headerlink" title="1.3 ä¸šåŠ¡åœºæ™¯"></a>1.3 ä¸šåŠ¡åœºæ™¯</h2><ul>
<li>å¤§æ•°æ®ç»“æ„ä¼ é€’ã€ç¼“å­˜ã€æ€§èƒ½ä¼˜åŒ–ã€‚</li>
</ul>
<h2 id="1-4-æ˜“æ··æ·†ç‚¹"><a href="#1-4-æ˜“æ··æ·†ç‚¹" class="headerlink" title="1.4 æ˜“æ··æ·†ç‚¹"></a>1.4 æ˜“æ··æ·†ç‚¹</h2><ul>
<li>COW åªåœ¨å€¼ç±»å‹ï¼ˆstructï¼‰ç”Ÿæ•ˆã€‚</li>
<li>åªè¯»ä¸ä¼šå¤åˆ¶ï¼Œå†™æ—¶æ‰å¤åˆ¶ã€‚</li>
</ul>
<h2 id="1-5-æ·±æŒ–è¿½é—®"><a href="#1-5-æ·±æŒ–è¿½é—®" class="headerlink" title="1.5 æ·±æŒ–è¿½é—®"></a>1.5 æ·±æŒ–è¿½é—®</h2><ul>
<li>COW å¦‚ä½•å®ç°ï¼Ÿå¼•ç”¨è®¡æ•°+å†™æ—¶æ£€æµ‹ã€‚</li>
<li>å¦‚ä½•è‡ªå®šä¹‰ struct æ”¯æŒ COWï¼Ÿç”¨ isKnownUniquelyReferencedã€‚</li>
</ul>
<h1 id="2-English-Answer"><a href="#2-English-Answer" class="headerlink" title="2. English Answer"></a>2. English Answer</h1><h2 id="2-1-Concept-Principle"><a href="#2-1-Concept-Principle" class="headerlink" title="2.1 Concept &amp; Principle"></a>2.1 Concept &amp; Principle</h2><p>Copy-on-write (COW) is an optimization: multiple variables share memory, only copy on write. Swiftâ€™s Array, Dictionary, String use COW.</p>
<h2 id="2-2-Code-Example"><a href="#2-2-Code-Example" class="headerlink" title="2.2 Code Example"></a>2.2 Code Example</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="operator">=</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">var</span> b <span class="operator">=</span> a <span class="comment">// not copied yet</span></span><br><span class="line">b[<span class="number">0</span>] <span class="operator">=</span> <span class="number">9</span> <span class="comment">// b is copied now, a unchanged</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3-Business-Scenarios"><a href="#2-3-Business-Scenarios" class="headerlink" title="2.3 Business Scenarios"></a>2.3 Business Scenarios</h2><ul>
<li>Large data passing, cache, performance.</li>
</ul>
<h2 id="2-4-Common-Confusions"><a href="#2-4-Common-Confusions" class="headerlink" title="2.4 Common Confusions"></a>2.4 Common Confusions</h2><ul>
<li>COW for value types only.</li>
<li>No copy on read, only on write.</li>
</ul>
<h2 id="2-5-Deep-Dive"><a href="#2-5-Deep-Dive" class="headerlink" title="2.5 Deep Dive"></a>2.5 Deep Dive</h2><ul>
<li>How COW works? Ref count + write check.</li>
<li>Custom struct COW? Use isKnownUniquelyReferenced.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://roy-luoyao.github.io/2025/07/17/iOS/CopyOnWrite/" data-id="cmdcsgd430001f3k7gdfw35r9" data-title="Copy-on-writeï¼ˆCOWï¼‰" class="article-share-link"><span class="fa fa-share">åˆ†äº«</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-iOS/Errorå…¼å®¹NSError" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/17/iOS/Error%E5%85%BC%E5%AE%B9NSError/" class="article-date">
  <time class="dt-published" datetime="2025-07-16T16:00:00.000Z" itemprop="datePublished">2025-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/07/17/iOS/Error%E5%85%BC%E5%AE%B9NSError/">Errorå…¼å®¹NSError</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-ä¸­æ–‡ç­”æ¡ˆ"><a href="#1-ä¸­æ–‡ç­”æ¡ˆ" class="headerlink" title="1. ä¸­æ–‡ç­”æ¡ˆ"></a>1. ä¸­æ–‡ç­”æ¡ˆ</h1><h2 id="1-1-Swift-Error-ä¸-NSError-çš„å…³ç³»"><a href="#1-1-Swift-Error-ä¸-NSError-çš„å…³ç³»" class="headerlink" title="1.1 Swift Error ä¸ NSError çš„å…³ç³»"></a>1.1 Swift Error ä¸ NSError çš„å…³ç³»</h2><ol>
<li>Swift çš„ Error åè®®ç”¨äºé”™è¯¯ç±»å‹ï¼ŒNSError æ˜¯ Objective-C çš„é”™è¯¯ç±»å‹ã€‚</li>
<li>Swift çš„ Error å¯ä»¥è‡ªåŠ¨æ¡¥æ¥ä¸º NSErrorï¼Œä¾¿äºä¸ OC&#x2F;ç³»ç»Ÿ API å…¼å®¹ã€‚</li>
</ol>
<h2 id="1-2-ä¸ºä»€ä¹ˆè¦å…¼å®¹ï¼Ÿ"><a href="#1-2-ä¸ºä»€ä¹ˆè¦å…¼å®¹ï¼Ÿ" class="headerlink" title="1.2 ä¸ºä»€ä¹ˆè¦å…¼å®¹ï¼Ÿ"></a>1.2 ä¸ºä»€ä¹ˆè¦å…¼å®¹ï¼Ÿ</h2><ul>
<li>å…¼å®¹ Apple å„ç§ APIï¼ˆå¦‚ Foundationã€ç½‘ç»œã€æ–‡ä»¶ç­‰ï¼‰ï¼Œä¾¿äºæ··ç¼–å’Œç¬¬ä¸‰æ–¹åº“é›†æˆã€‚</li>
<li>ä¿è¯é”™è¯¯ä¿¡æ¯çš„å®Œæ•´æ€§å’Œå¯è¿½è¸ªæ€§ã€‚</li>
</ul>
<h2 id="1-3-å®é™…ä»£ç ç¤ºä¾‹"><a href="#1-3-å®é™…ä»£ç ç¤ºä¾‹" class="headerlink" title="1.3 å®é™…ä»£ç ç¤ºä¾‹"></a>1.3 å®é™…ä»£ç ç¤ºä¾‹</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Swift è‡ªå®šä¹‰ Error</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">MyError</span>: <span class="title class_ inherited__">Error</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> notFound</span><br><span class="line">    <span class="keyword">case</span> invalid</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½¬ä¸º NSError</span></span><br><span class="line"><span class="keyword">let</span> error: <span class="type">Error</span> <span class="operator">=</span> <span class="type">MyError</span>.notFound</span><br><span class="line"><span class="keyword">let</span> nsError <span class="operator">=</span> error <span class="keyword">as</span> <span class="type">NSError</span></span><br><span class="line"><span class="built_in">print</span>(nsError.domain) <span class="comment">// è¾“å‡º MyError</span></span><br><span class="line"><span class="built_in">print</span>(nsError.code)   <span class="comment">// è¾“å‡º 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// OC API å…¼å®¹</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">legacyAPICall</span>() <span class="keyword">throws</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="type">MyError</span>.invalid</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> legacyAPICall()</span><br><span class="line">&#125; <span class="keyword">catch</span> <span class="keyword">let</span> error <span class="keyword">as</span> <span class="type">NSError</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(error.domain, error.code)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-4-ä¸šåŠ¡-ç”¨æˆ·ä»·å€¼"><a href="#1-4-ä¸šåŠ¡-ç”¨æˆ·ä»·å€¼" class="headerlink" title="1.4 ä¸šåŠ¡&#x2F;ç”¨æˆ·ä»·å€¼"></a>1.4 ä¸šåŠ¡&#x2F;ç”¨æˆ·ä»·å€¼</h2><ul>
<li>ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</li>
<li>ä¾¿äºæ—¥å¿—ã€ç›‘æ§å’Œé—®é¢˜å®šä½ã€‚</li>
</ul>
<h2 id="1-5-æ˜“æ··æ·†ç‚¹"><a href="#1-5-æ˜“æ··æ·†ç‚¹" class="headerlink" title="1.5 æ˜“æ··æ·†ç‚¹"></a>1.5 æ˜“æ··æ·†ç‚¹</h2><ul>
<li>Swift Error åªéœ€éµå¾ª Error åè®®å³å¯è‡ªåŠ¨æ¡¥æ¥ã€‚</li>
<li>NSError éœ€è¦ domainã€codeã€userInfoï¼ŒSwift Error ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚</li>
</ul>
<h1 id="2-English-Answer"><a href="#2-English-Answer" class="headerlink" title="2. English Answer"></a>2. English Answer</h1><h2 id="2-1-Relationship"><a href="#2-1-Relationship" class="headerlink" title="2.1 Relationship"></a>2.1 Relationship</h2><ol>
<li>Swift Error protocol is for error types; NSError is Objective-Câ€™s error type.</li>
<li>Swift Error can be automatically bridged to NSError for compatibility.</li>
</ol>
<h2 id="2-2-Why-compatible"><a href="#2-2-Why-compatible" class="headerlink" title="2.2 Why compatible?"></a>2.2 Why compatible?</h2><ul>
<li>For Apple APIs (Foundation, networking, etc.), mixed code, and third-party integration.</li>
<li>Ensures error info completeness and traceability.</li>
</ul>
<h2 id="2-3-Code-Example"><a href="#2-3-Code-Example" class="headerlink" title="2.3 Code Example"></a>2.3 Code Example</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">MyError</span>: <span class="title class_ inherited__">Error</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> notFound</span><br><span class="line">    <span class="keyword">case</span> invalid</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> error: <span class="type">Error</span> <span class="operator">=</span> <span class="type">MyError</span>.notFound</span><br><span class="line"><span class="keyword">let</span> nsError <span class="operator">=</span> error <span class="keyword">as</span> <span class="type">NSError</span></span><br><span class="line"><span class="built_in">print</span>(nsError.domain)</span><br><span class="line"><span class="built_in">print</span>(nsError.code)</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="type">MyError</span>.invalid</span><br><span class="line">&#125; <span class="keyword">catch</span> <span class="keyword">let</span> error <span class="keyword">as</span> <span class="type">NSError</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(error.domain, error.code)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-4-Business-User-Value"><a href="#2-4-Business-User-Value" class="headerlink" title="2.4 Business&#x2F;User Value"></a>2.4 Business&#x2F;User Value</h2><ul>
<li>Unified error handling, better UX.</li>
<li>Easier logging, monitoring, and debugging.</li>
</ul>
<h2 id="2-5-Common-Confusion"><a href="#2-5-Common-Confusion" class="headerlink" title="2.5 Common Confusion"></a>2.5 Common Confusion</h2><ul>
<li>Swift Error auto-bridges to NSError.</li>
<li>NSError needs domain&#x2F;code&#x2F;userInfo; Swift Error generates them automatically.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://roy-luoyao.github.io/2025/07/17/iOS/Error%E5%85%BC%E5%AE%B9NSError/" data-id="cmdcsgd460003f3k7ek6r6q7h" data-title="Errorå…¼å®¹NSError" class="article-share-link"><span class="fa fa-share">åˆ†äº«</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-iOS/KVC_KVO" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/17/iOS/KVC_KVO/" class="article-date">
  <time class="dt-published" datetime="2025-07-16T16:00:00.000Z" itemprop="datePublished">2025-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/07/17/iOS/KVC_KVO/">KVCä¸KVO</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-ä¸­æ–‡ç­”æ¡ˆ"><a href="#1-ä¸­æ–‡ç­”æ¡ˆ" class="headerlink" title="1. ä¸­æ–‡ç­”æ¡ˆ"></a>1. ä¸­æ–‡ç­”æ¡ˆ</h1><h2 id="1-1-æ¦‚å¿µä¸åŸç†"><a href="#1-1-æ¦‚å¿µä¸åŸç†" class="headerlink" title="1.1 æ¦‚å¿µä¸åŸç†"></a>1.1 æ¦‚å¿µä¸åŸç†</h2><ul>
<li><strong>KVCï¼ˆKey-Value Codingï¼‰</strong>ï¼šé€šè¿‡å­—ç¬¦ä¸² key é—´æ¥è®¿é—®å¯¹è±¡å±æ€§ã€‚</li>
<li><strong>KVOï¼ˆKey-Value Observingï¼‰</strong>ï¼šåŸºäº KVC çš„è§‚å¯Ÿæœºåˆ¶ï¼Œç›‘å¬å±æ€§å˜åŒ–ã€‚</li>
</ul>
<h2 id="1-2-ä»£ç ç¤ºä¾‹"><a href="#1-2-ä»£ç ç¤ºä¾‹" class="headerlink" title="1.2 ä»£ç ç¤ºä¾‹"></a>1.2 ä»£ç ç¤ºä¾‹</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>: <span class="title class_ inherited__">NSObject</span> &#123;</span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">dynamic</span> <span class="keyword">var</span> name <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p <span class="operator">=</span> <span class="type">Person</span>()</span><br><span class="line">p.setValue(<span class="string">&quot;Tom&quot;</span>, forKey: <span class="string">&quot;name&quot;</span>) <span class="comment">// KVC</span></span><br><span class="line">p.addObserver(<span class="keyword">self</span>, forKeyPath: <span class="string">&quot;name&quot;</span>, options: .new, context: <span class="literal">nil</span>) <span class="comment">// KVO</span></span><br></pre></td></tr></table></figure>

<h2 id="1-3-ä¸šåŠ¡åœºæ™¯"><a href="#1-3-ä¸šåŠ¡åœºæ™¯" class="headerlink" title="1.3 ä¸šåŠ¡åœºæ™¯"></a>1.3 ä¸šåŠ¡åœºæ™¯</h2><ul>
<li>æ•°æ®ç»‘å®šã€UIè‡ªåŠ¨åˆ·æ–°ã€MVVM ç­‰ã€‚</li>
</ul>
<h2 id="1-4-æ˜“æ··æ·†ç‚¹"><a href="#1-4-æ˜“æ··æ·†ç‚¹" class="headerlink" title="1.4 æ˜“æ··æ·†ç‚¹"></a>1.4 æ˜“æ··æ·†ç‚¹</h2><ul>
<li>KVO éœ€ç»§æ‰¿ NSObject ä¸”å±æ€§ dynamicã€‚</li>
<li>SwiftUI&#x2F;Combine æ¨èç”¨æ–°æœºåˆ¶ã€‚</li>
</ul>
<h2 id="1-5-æ·±æŒ–è¿½é—®"><a href="#1-5-æ·±æŒ–è¿½é—®" class="headerlink" title="1.5 æ·±æŒ–è¿½é—®"></a>1.5 æ·±æŒ–è¿½é—®</h2><ul>
<li>KVO çš„åŸç†ï¼Ÿè¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆå­ç±»ï¼Œé‡å†™ setterã€‚</li>
<li>KVO çš„å±€é™ï¼Ÿç±»å‹å®‰å…¨å·®ã€æ˜“é—æ¼ç§»é™¤ã€‚</li>
</ul>
<h1 id="2-English-Answer"><a href="#2-English-Answer" class="headerlink" title="2. English Answer"></a>2. English Answer</h1><h2 id="2-1-Concept-Principle"><a href="#2-1-Concept-Principle" class="headerlink" title="2.1 Concept &amp; Principle"></a>2.1 Concept &amp; Principle</h2><ul>
<li><strong>KVC</strong>: Access properties via string key.</li>
<li><strong>KVO</strong>: Observe property changes, based on KVC.</li>
</ul>
<h2 id="2-2-Code-Example"><a href="#2-2-Code-Example" class="headerlink" title="2.2 Code Example"></a>2.2 Code Example</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>: <span class="title class_ inherited__">NSObject</span> &#123;</span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">dynamic</span> <span class="keyword">var</span> name <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p <span class="operator">=</span> <span class="type">Person</span>()</span><br><span class="line">p.setValue(<span class="string">&quot;Tom&quot;</span>, forKey: <span class="string">&quot;name&quot;</span>) <span class="comment">// KVC</span></span><br><span class="line">p.addObserver(<span class="keyword">self</span>, forKeyPath: <span class="string">&quot;name&quot;</span>, options: .new, context: <span class="literal">nil</span>) <span class="comment">// KVO</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3-Business-Scenarios"><a href="#2-3-Business-Scenarios" class="headerlink" title="2.3 Business Scenarios"></a>2.3 Business Scenarios</h2><ul>
<li>Data binding, UI auto-refresh, MVVM, etc.</li>
</ul>
<h2 id="2-4-Common-Confusions"><a href="#2-4-Common-Confusions" class="headerlink" title="2.4 Common Confusions"></a>2.4 Common Confusions</h2><ul>
<li>KVO: NSObject + dynamic.</li>
<li>SwiftUI&#x2F;Combine: prefer new mechanisms.</li>
</ul>
<h2 id="2-5-Deep-Dive"><a href="#2-5-Deep-Dive" class="headerlink" title="2.5 Deep Dive"></a>2.5 Deep Dive</h2><ul>
<li>KVO principle: runtime subclass, override setter.</li>
<li>KVO limitations: type safety, removal risk.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://roy-luoyao.github.io/2025/07/17/iOS/KVC_KVO/" data-id="cmdcsgd480005f3k7dqcdcdqn" data-title="KVCä¸KVO" class="article-share-link"><span class="fa fa-share">åˆ†äº«</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-iOS/OpenPublicåŒºåˆ«" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/17/iOS/OpenPublic%E5%8C%BA%E5%88%AB/" class="article-date">
  <time class="dt-published" datetime="2025-07-16T16:00:00.000Z" itemprop="datePublished">2025-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/07/17/iOS/OpenPublic%E5%8C%BA%E5%88%AB/">Openä¸Publicçš„åŒºåˆ«</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-ä¸­æ–‡ç­”æ¡ˆ"><a href="#1-ä¸­æ–‡ç­”æ¡ˆ" class="headerlink" title="1. ä¸­æ–‡ç­”æ¡ˆ"></a>1. ä¸­æ–‡ç­”æ¡ˆ</h1><h2 id="1-1-æ¦‚å¿µä¸æœ¬è´¨åŒºåˆ«"><a href="#1-1-æ¦‚å¿µä¸æœ¬è´¨åŒºåˆ«" class="headerlink" title="1.1 æ¦‚å¿µä¸æœ¬è´¨åŒºåˆ«"></a>1.1 æ¦‚å¿µä¸æœ¬è´¨åŒºåˆ«</h2><ol>
<li><strong>open</strong>ï¼šå…è®¸æ¨¡å—å¤–ç»§æ‰¿å’Œé‡å†™ï¼ˆå­ç±»åŒ–&#x2F;overrideï¼‰ã€‚</li>
<li><strong>public</strong>ï¼šå…è®¸æ¨¡å—å¤–è®¿é—®ï¼Œä½†ä¸å…è®¸ç»§æ‰¿å’Œé‡å†™ã€‚</li>
</ol>
<h2 id="1-2-ä¸ºä»€ä¹ˆè¦åŒºåˆ†ï¼Ÿ"><a href="#1-2-ä¸ºä»€ä¹ˆè¦åŒºåˆ†ï¼Ÿ" class="headerlink" title="1.2 ä¸ºä»€ä¹ˆè¦åŒºåˆ†ï¼Ÿ"></a>1.2 ä¸ºä»€ä¹ˆè¦åŒºåˆ†ï¼Ÿ</h2><ul>
<li><strong>å®‰å…¨æ€§</strong>ï¼špublic åªæš´éœ²æ¥å£ï¼Œé˜²æ­¢å¤–éƒ¨éšæ„æ‰©å±•ï¼Œä¿æŠ¤å†…éƒ¨å®ç°ã€‚</li>
<li><strong>çµæ´»æ€§</strong>ï¼šopen é€‚åˆåšæ¡†æ¶&#x2F;åº“ï¼Œå…è®¸å¤–éƒ¨è‡ªå®šä¹‰æ‰©å±•ã€‚</li>
</ul>
<h2 id="1-3-å®é™…ä»£ç ç¤ºä¾‹"><a href="#1-3-å®é™…ä»£ç ç¤ºä¾‹" class="headerlink" title="1.3 å®é™…ä»£ç ç¤ºä¾‹"></a>1.3 å®é™…ä»£ç ç¤ºä¾‹</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">open</span> <span class="keyword">func</span> <span class="title function_">speak</span>() &#123; <span class="built_in">print</span>(<span class="string">&quot;Animal&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">func</span> <span class="title function_">sayHi</span>() &#123; <span class="built_in">print</span>(<span class="string">&quot;Hi&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¶ä»–æ¨¡å—</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>: <span class="title class_ inherited__">Animal</span> &#123; <span class="comment">// âœ… å…è®¸ç»§æ‰¿</span></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">speak</span>() &#123; <span class="built_in">print</span>(<span class="string">&quot;Dog&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// class Student: Person &#123;&#125; // âŒ ä¸å…è®¸ç»§æ‰¿</span></span><br></pre></td></tr></table></figure>

<h2 id="1-4-ä¸šåŠ¡-ç”¨æˆ·ä»·å€¼"><a href="#1-4-ä¸šåŠ¡-ç”¨æˆ·ä»·å€¼" class="headerlink" title="1.4 ä¸šåŠ¡&#x2F;ç”¨æˆ·ä»·å€¼"></a>1.4 ä¸šåŠ¡&#x2F;ç”¨æˆ·ä»·å€¼</h2><ul>
<li>open é€‚åˆ SDK&#x2F;æ¡†æ¶ï¼Œä¾¿äºäºŒæ¬¡å¼€å‘ã€‚</li>
<li>public é€‚åˆåªè¯» APIï¼Œä¿è¯äº§å“ç¨³å®šã€‚</li>
</ul>
<h2 id="1-5-æ˜“æ··æ·†ç‚¹"><a href="#1-5-æ˜“æ··æ·†ç‚¹" class="headerlink" title="1.5 æ˜“æ··æ·†ç‚¹"></a>1.5 æ˜“æ··æ·†ç‚¹</h2><ul>
<li>open &#x3D; public + å…è®¸ç»§æ‰¿&#x2F;é‡å†™ã€‚</li>
<li>public åªèƒ½è®¿é—®ï¼Œä¸èƒ½æ‰©å±•ã€‚</li>
</ul>
<h1 id="2-English-Answer"><a href="#2-English-Answer" class="headerlink" title="2. English Answer"></a>2. English Answer</h1><h2 id="2-1-Concept-and-Key-Difference"><a href="#2-1-Concept-and-Key-Difference" class="headerlink" title="2.1 Concept and Key Difference"></a>2.1 Concept and Key Difference</h2><ol>
<li><strong>open</strong>: Allows subclassing&#x2F;overriding outside the module.</li>
<li><strong>public</strong>: Allows access but not subclassing&#x2F;overriding outside the module.</li>
</ol>
<h2 id="2-2-Why-distinguish"><a href="#2-2-Why-distinguish" class="headerlink" title="2.2 Why distinguish?"></a>2.2 Why distinguish?</h2><ul>
<li><strong>Security</strong>: public exposes API but prevents external extension.</li>
<li><strong>Flexibility</strong>: open is for frameworks, allows external customization.</li>
</ul>
<h2 id="2-3-Code-Example"><a href="#2-3-Code-Example" class="headerlink" title="2.3 Code Example"></a>2.3 Code Example</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">open</span> <span class="keyword">func</span> <span class="title function_">speak</span>() &#123; <span class="built_in">print</span>(<span class="string">&quot;Animal&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">func</span> <span class="title function_">sayHi</span>() &#123; <span class="built_in">print</span>(<span class="string">&quot;Hi&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Other module</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>: <span class="title class_ inherited__">Animal</span> &#123; <span class="comment">// âœ… Allowed</span></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">speak</span>() &#123; <span class="built_in">print</span>(<span class="string">&quot;Dog&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// class Student: Person &#123;&#125; // âŒ Not allowed</span></span><br></pre></td></tr></table></figure>

<h2 id="2-4-Business-User-Value"><a href="#2-4-Business-User-Value" class="headerlink" title="2.4 Business&#x2F;User Value"></a>2.4 Business&#x2F;User Value</h2><ul>
<li>open: for SDK&#x2F;framework, supports extension.</li>
<li>public: for read-only API, ensures stability.</li>
</ul>
<h2 id="2-5-Common-Confusion"><a href="#2-5-Common-Confusion" class="headerlink" title="2.5 Common Confusion"></a>2.5 Common Confusion</h2><ul>
<li>open &#x3D; public + subclass&#x2F;override allowed.</li>
<li>public: only access, no extension.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://roy-luoyao.github.io/2025/07/17/iOS/OpenPublic%E5%8C%BA%E5%88%AB/" data-id="cmdcsgd490006f3k72i1v1i65" data-title="Openä¸Publicçš„åŒºåˆ«" class="article-share-link"><span class="fa fa-share">åˆ†äº«</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-iOS/RxSwiftæ ¸å¿ƒåŸç†ä¸åº”ç”¨" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/17/iOS/RxSwift%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8/" class="article-date">
  <time class="dt-published" datetime="2025-07-16T16:00:00.000Z" itemprop="datePublished">2025-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/07/17/iOS/RxSwift%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8/">RxSwift æ ¸å¿ƒåŸç†ä¸ä¸šåŠ¡åº”ç”¨</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-ä¸­æ–‡ç­”æ¡ˆ"><a href="#1-ä¸­æ–‡ç­”æ¡ˆ" class="headerlink" title="1. ä¸­æ–‡ç­”æ¡ˆ"></a>1. ä¸­æ–‡ç­”æ¡ˆ</h1><h2 id="1-1-æ¦‚å¿µä¸æ ¸å¿ƒæ€æƒ³"><a href="#1-1-æ¦‚å¿µä¸æ ¸å¿ƒæ€æƒ³" class="headerlink" title="1.1 æ¦‚å¿µä¸æ ¸å¿ƒæ€æƒ³"></a>1.1 æ¦‚å¿µä¸æ ¸å¿ƒæ€æƒ³</h2><p>RxSwift æ˜¯å“åº”å¼ç¼–ç¨‹æ¡†æ¶ï¼Œæ ¸å¿ƒæ˜¯ Observableï¼ˆå¯è§‚å¯Ÿåºåˆ—ï¼‰ã€Observerï¼ˆè§‚å¯Ÿè€…ï¼‰ã€æ“ä½œç¬¦é“¾å¼ç»„åˆï¼Œæ”¯æŒå¼‚æ­¥äº‹ä»¶æµå¤„ç†ã€‚</p>
<h2 id="1-2-ä»£ç ç¤ºä¾‹"><a href="#1-2-ä»£ç ç¤ºä¾‹" class="headerlink" title="1.2 ä»£ç ç¤ºä¾‹"></a>1.2 ä»£ç ç¤ºä¾‹</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"><span class="type">Observable</span>.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">    .map &#123; <span class="variable">$0</span> <span class="operator">*</span> <span class="number">2</span> &#125;</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br></pre></td></tr></table></figure>

<h2 id="1-3-ä¸šåŠ¡åœºæ™¯"><a href="#1-3-ä¸šåŠ¡åœºæ™¯" class="headerlink" title="1.3 ä¸šåŠ¡åœºæ™¯"></a>1.3 ä¸šåŠ¡åœºæ™¯</h2><ul>
<li>UI ç»‘å®šã€ç½‘ç»œè¯·æ±‚ã€è¡¨å•æ ¡éªŒã€äº‹ä»¶æµè½¬ç­‰ã€‚</li>
</ul>
<h2 id="1-4-æ˜“æ··æ·†ç‚¹"><a href="#1-4-æ˜“æ··æ·†ç‚¹" class="headerlink" title="1.4 æ˜“æ··æ·†ç‚¹"></a>1.4 æ˜“æ··æ·†ç‚¹</h2><ul>
<li>RxSwift ä¸æ˜¯å¤šçº¿ç¨‹åº“ï¼Œä½†å¯ç»“åˆè°ƒåº¦å™¨å®ç°çº¿ç¨‹åˆ‡æ¢ã€‚</li>
<li>èµ„æºé‡Šæ”¾é  DisposeBagã€‚</li>
</ul>
<h2 id="1-5-æ·±æŒ–è¿½é—®"><a href="#1-5-æ·±æŒ–è¿½é—®" class="headerlink" title="1.5 æ·±æŒ–è¿½é—®"></a>1.5 æ·±æŒ–è¿½é—®</h2><ul>
<li>RxSwift å¦‚ä½•é¿å…å›è°ƒåœ°ç‹±ï¼Ÿé“¾å¼ç»„åˆã€ç»Ÿä¸€é”™è¯¯å¤„ç†ã€‚</li>
<li>ä¸ Combine åŒºåˆ«ï¼ŸCombine æ˜¯è‹¹æœå®˜æ–¹ï¼ŒAPI æ›´ Swiftyã€‚</li>
</ul>
<h1 id="2-English-Answer"><a href="#2-English-Answer" class="headerlink" title="2. English Answer"></a>2. English Answer</h1><h2 id="2-1-Concept-Core-Idea"><a href="#2-1-Concept-Core-Idea" class="headerlink" title="2.1 Concept &amp; Core Idea"></a>2.1 Concept &amp; Core Idea</h2><p>RxSwift is a reactive framework: Observable, Observer, operator chaining, async event stream.</p>
<h2 id="2-2-Code-Example"><a href="#2-2-Code-Example" class="headerlink" title="2.2 Code Example"></a>2.2 Code Example</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"><span class="type">Observable</span>.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">    .map &#123; <span class="variable">$0</span> <span class="operator">*</span> <span class="number">2</span> &#125;</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br></pre></td></tr></table></figure>

<h2 id="2-3-Business-Scenarios"><a href="#2-3-Business-Scenarios" class="headerlink" title="2.3 Business Scenarios"></a>2.3 Business Scenarios</h2><ul>
<li>UI binding, network, form validation, event flow, etc.</li>
</ul>
<h2 id="2-4-Common-Confusions"><a href="#2-4-Common-Confusions" class="headerlink" title="2.4 Common Confusions"></a>2.4 Common Confusions</h2><ul>
<li>RxSwift is not a threading lib, but supports schedulers.</li>
<li>DisposeBag for resource release.</li>
</ul>
<h2 id="2-5-Deep-Dive"><a href="#2-5-Deep-Dive" class="headerlink" title="2.5 Deep Dive"></a>2.5 Deep Dive</h2><ul>
<li>How avoids callback hell? Chaining, unified error handling.</li>
<li>Difference with Combine? Combine is official, more Swifty.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://roy-luoyao.github.io/2025/07/17/iOS/RxSwift%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8/" data-id="cmdcsgd4a0009f3k70ndbboem" data-title="RxSwift æ ¸å¿ƒåŸç†ä¸ä¸šåŠ¡åº”ç”¨" class="article-share-link"><span class="fa fa-share">åˆ†äº«</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-iOS/Stringä¸NSStringåŒºåˆ«" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/17/iOS/String%E4%B8%8ENSString%E5%8C%BA%E5%88%AB/" class="article-date">
  <time class="dt-published" datetime="2025-07-16T16:00:00.000Z" itemprop="datePublished">2025-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/07/17/iOS/String%E4%B8%8ENSString%E5%8C%BA%E5%88%AB/">Stringä¸NSStringçš„å…³ç³»ä¸åŒºåˆ«</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-ä¸­æ–‡ç­”æ¡ˆ"><a href="#1-ä¸­æ–‡ç­”æ¡ˆ" class="headerlink" title="1. ä¸­æ–‡ç­”æ¡ˆ"></a>1. ä¸­æ–‡ç­”æ¡ˆ</h1><h2 id="1-1-å…³ç³»ä¸åŒºåˆ«"><a href="#1-1-å…³ç³»ä¸åŒºåˆ«" class="headerlink" title="1.1 å…³ç³»ä¸åŒºåˆ«"></a>1.1 å…³ç³»ä¸åŒºåˆ«</h2><ol>
<li>String æ˜¯ Swift çš„åŸç”Ÿå­—ç¬¦ä¸²ç±»å‹ï¼ŒNSString æ˜¯ OC çš„å­—ç¬¦ä¸²ç±»ã€‚</li>
<li>String ä¸ NSString å¯ä»¥è‡ªåŠ¨æ¡¥æ¥ï¼Œäº’ç›¸è½¬æ¢ã€‚</li>
<li>String æ˜¯å€¼ç±»å‹ï¼ˆstructï¼‰ï¼ŒNSString æ˜¯å¼•ç”¨ç±»å‹ï¼ˆclassï¼‰ã€‚</li>
</ol>
<h2 id="1-2-ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ"><a href="#1-2-ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ" class="headerlink" title="1.2 ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ"></a>1.2 ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ</h2><ul>
<li>String é‡‡ç”¨å€¼ç±»å‹ï¼Œæå‡æ€§èƒ½å’Œå®‰å…¨æ€§ï¼Œæ”¯æŒ copy-on-writeã€‚</li>
<li>å…¼å®¹ OC ç”Ÿæ€ï¼Œä¾¿äºæ··ç¼–ã€‚</li>
</ul>
<h2 id="1-3-å®é™…ä»£ç ç¤ºä¾‹"><a href="#1-3-å®é™…ä»£ç ç¤ºä¾‹" class="headerlink" title="1.3 å®é™…ä»£ç ç¤ºä¾‹"></a>1.3 å®é™…ä»£ç ç¤ºä¾‹</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> swiftStr: <span class="type">String</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span></span><br><span class="line"><span class="keyword">let</span> ocStr: <span class="type">NSString</span> <span class="operator">=</span> swiftStr <span class="keyword">as</span> <span class="type">NSString</span></span><br><span class="line"><span class="keyword">let</span> swiftStr2: <span class="type">String</span> <span class="operator">=</span> ocStr <span class="keyword">as</span> <span class="type">String</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å€¼ç±»å‹ç‰¹æ€§</span></span><br><span class="line"><span class="keyword">var</span> a <span class="operator">=</span> <span class="string">&quot;abc&quot;</span></span><br><span class="line"><span class="keyword">var</span> b <span class="operator">=</span> a</span><br><span class="line">b <span class="operator">+=</span> <span class="string">&quot;d&quot;</span></span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment">// &quot;abc&quot;</span></span><br><span class="line"><span class="built_in">print</span>(b) <span class="comment">// &quot;abcd&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="1-4-ä¸šåŠ¡-ç”¨æˆ·ä»·å€¼"><a href="#1-4-ä¸šåŠ¡-ç”¨æˆ·ä»·å€¼" class="headerlink" title="1.4 ä¸šåŠ¡&#x2F;ç”¨æˆ·ä»·å€¼"></a>1.4 ä¸šåŠ¡&#x2F;ç”¨æˆ·ä»·å€¼</h2><ul>
<li>æ€§èƒ½æ›´ä¼˜ï¼Œçº¿ç¨‹å®‰å…¨ã€‚</li>
<li>å…¼å®¹ OCï¼Œä¾¿äºè¿ç§»å’Œé›†æˆã€‚</li>
</ul>
<h2 id="1-5-æ˜“æ··æ·†ç‚¹"><a href="#1-5-æ˜“æ··æ·†ç‚¹" class="headerlink" title="1.5 æ˜“æ··æ·†ç‚¹"></a>1.5 æ˜“æ··æ·†ç‚¹</h2><ul>
<li>String æ˜¯ structï¼ŒNSString æ˜¯ classã€‚</li>
<li>String æ”¯æŒæ›´å¤š Swift ç‰¹æ€§ï¼ˆå¦‚æ³›å‹ã€åè®®æ‰©å±•ç­‰ï¼‰ã€‚</li>
</ul>
<h1 id="2-English-Answer"><a href="#2-English-Answer" class="headerlink" title="2. English Answer"></a>2. English Answer</h1><h2 id="2-1-Relationship-and-Difference"><a href="#2-1-Relationship-and-Difference" class="headerlink" title="2.1 Relationship and Difference"></a>2.1 Relationship and Difference</h2><ol>
<li>String: native Swift string type; NSString: Objective-C class.</li>
<li>String and NSString are automatically bridged.</li>
<li>String is a value type (struct), NSString is a reference type (class).</li>
</ol>
<h2 id="2-2-Why-this-design"><a href="#2-2-Why-this-design" class="headerlink" title="2.2 Why this design?"></a>2.2 Why this design?</h2><ul>
<li>String as value type: better performance, safety, COW.</li>
<li>OC compatibility for mixed code.</li>
</ul>
<h2 id="2-3-Code-Example"><a href="#2-3-Code-Example" class="headerlink" title="2.3 Code Example"></a>2.3 Code Example</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> swiftStr: <span class="type">String</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span></span><br><span class="line"><span class="keyword">let</span> ocStr: <span class="type">NSString</span> <span class="operator">=</span> swiftStr <span class="keyword">as</span> <span class="type">NSString</span></span><br><span class="line"><span class="keyword">let</span> swiftStr2: <span class="type">String</span> <span class="operator">=</span> ocStr <span class="keyword">as</span> <span class="type">String</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a <span class="operator">=</span> <span class="string">&quot;abc&quot;</span></span><br><span class="line"><span class="keyword">var</span> b <span class="operator">=</span> a</span><br><span class="line">b <span class="operator">+=</span> <span class="string">&quot;d&quot;</span></span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment">// &quot;abc&quot;</span></span><br><span class="line"><span class="built_in">print</span>(b) <span class="comment">// &quot;abcd&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-4-Business-User-Value"><a href="#2-4-Business-User-Value" class="headerlink" title="2.4 Business&#x2F;User Value"></a>2.4 Business&#x2F;User Value</h2><ul>
<li>Better performance, thread safety.</li>
<li>OC compatibility, easier migration&#x2F;integration.</li>
</ul>
<h2 id="2-5-Common-Confusion"><a href="#2-5-Common-Confusion" class="headerlink" title="2.5 Common Confusion"></a>2.5 Common Confusion</h2><ul>
<li>String is struct, NSString is class.</li>
<li>String supports more Swift features (generics, protocol extensions, etc).</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://roy-luoyao.github.io/2025/07/17/iOS/String%E4%B8%8ENSString%E5%8C%BA%E5%88%AB/" data-id="cmdcsgd4b000af3k7d3p0hwko" data-title="Stringä¸NSStringçš„å…³ç³»ä¸åŒºåˆ«" class="article-share-link"><span class="fa fa-share">åˆ†äº«</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-iOS/Stringé•¿åº¦è·å–" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/17/iOS/String%E9%95%BF%E5%BA%A6%E8%8E%B7%E5%8F%96/" class="article-date">
  <time class="dt-published" datetime="2025-07-16T16:00:00.000Z" itemprop="datePublished">2025-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/07/17/iOS/String%E9%95%BF%E5%BA%A6%E8%8E%B7%E5%8F%96/">è·å–ä¸€ä¸ªStringçš„é•¿åº¦</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-ä¸­æ–‡ç­”æ¡ˆ"><a href="#1-ä¸­æ–‡ç­”æ¡ˆ" class="headerlink" title="1. ä¸­æ–‡ç­”æ¡ˆ"></a>1. ä¸­æ–‡ç­”æ¡ˆ</h1><h2 id="1-1-è·å–æ–¹å¼"><a href="#1-1-è·å–æ–¹å¼" class="headerlink" title="1.1 è·å–æ–¹å¼"></a>1.1 è·å–æ–¹å¼</h2><ol>
<li>ä½¿ç”¨ <code>count</code> å±æ€§è·å–å­—ç¬¦æ•°ã€‚</li>
<li>æ³¨æ„ Swift çš„ String æ”¯æŒ Unicodeï¼Œcount ç»Ÿè®¡çš„æ˜¯å­—ç¬¦ï¼ˆè€Œéå­—èŠ‚ï¼‰ã€‚</li>
</ol>
<h2 id="1-2-ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ"><a href="#1-2-ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ" class="headerlink" title="1.2 ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ"></a>1.2 ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ</h2><ul>
<li>ä¿è¯å¤šè¯­è¨€&#x2F;è¡¨æƒ…ç¬¦å·ç­‰å¤æ‚å­—ç¬¦çš„æ­£ç¡®ç»Ÿè®¡ã€‚</li>
<li>æå‡å›½é™…åŒ–å’Œç”¨æˆ·ä½“éªŒã€‚</li>
</ul>
<h2 id="1-3-å®é™…ä»£ç ç¤ºä¾‹"><a href="#1-3-å®é™…ä»£ç ç¤ºä¾‹" class="headerlink" title="1.3 å®é™…ä»£ç ç¤ºä¾‹"></a>1.3 å®é™…ä»£ç ç¤ºä¾‹</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str <span class="operator">=</span> <span class="string">&quot;ä½ å¥½abcğŸ˜Š&quot;</span></span><br><span class="line"><span class="built_in">print</span>(str.count) <span class="comment">// 6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nsStr: <span class="type">NSString</span> <span class="operator">=</span> str <span class="keyword">as</span> <span class="type">NSString</span></span><br><span class="line"><span class="built_in">print</span>(nsStr.length) <span class="comment">// 8ï¼ˆUTF-16 å•å…ƒæ•°ï¼‰</span></span><br></pre></td></tr></table></figure>

<h2 id="1-4-ä¸šåŠ¡-ç”¨æˆ·ä»·å€¼"><a href="#1-4-ä¸šåŠ¡-ç”¨æˆ·ä»·å€¼" class="headerlink" title="1.4 ä¸šåŠ¡&#x2F;ç”¨æˆ·ä»·å€¼"></a>1.4 ä¸šåŠ¡&#x2F;ç”¨æˆ·ä»·å€¼</h2><ul>
<li>ä¿è¯å­—ç¬¦ç»Ÿè®¡å‡†ç¡®ï¼Œé¿å… UI é”™ä½æˆ–æˆªæ–­ã€‚</li>
<li>æ”¯æŒå¤šè¯­è¨€å’Œè¡¨æƒ…ï¼Œæå‡äº§å“å›½é™…åŒ–èƒ½åŠ›ã€‚</li>
</ul>
<h2 id="1-5-æ˜“æ··æ·†ç‚¹"><a href="#1-5-æ˜“æ··æ·†ç‚¹" class="headerlink" title="1.5 æ˜“æ··æ·†ç‚¹"></a>1.5 æ˜“æ··æ·†ç‚¹</h2><ul>
<li>String.count æ˜¯å­—ç¬¦æ•°ï¼ŒNSString.length æ˜¯ UTF-16 å•å…ƒæ•°ã€‚</li>
<li>éƒ¨åˆ† emoji&#x2F;ç‰¹æ®Šå­—ç¬¦åœ¨ NSString.length ä¸‹ä¼šç»Ÿè®¡ä¸º2ã€‚</li>
</ul>
<h1 id="2-English-Answer"><a href="#2-English-Answer" class="headerlink" title="2. English Answer"></a>2. English Answer</h1><h2 id="2-1-How-to-get-String-length"><a href="#2-1-How-to-get-String-length" class="headerlink" title="2.1 How to get String length"></a>2.1 How to get String length</h2><ol>
<li>Use <code>count</code> property for character count.</li>
<li>Swift String supports Unicode, count is for characters, not bytes.</li>
</ol>
<h2 id="2-2-Why-this-design"><a href="#2-2-Why-this-design" class="headerlink" title="2.2 Why this design?"></a>2.2 Why this design?</h2><ul>
<li>Ensures correct count for multi-language&#x2F;emoji.</li>
<li>Better i18n and UX.</li>
</ul>
<h2 id="2-3-Code-Example"><a href="#2-3-Code-Example" class="headerlink" title="2.3 Code Example"></a>2.3 Code Example</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str <span class="operator">=</span> <span class="string">&quot;ä½ å¥½abcğŸ˜Š&quot;</span></span><br><span class="line"><span class="built_in">print</span>(str.count) <span class="comment">// 6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nsStr: <span class="type">NSString</span> <span class="operator">=</span> str <span class="keyword">as</span> <span class="type">NSString</span></span><br><span class="line"><span class="built_in">print</span>(nsStr.length) <span class="comment">// 8 (UTF-16 units)</span></span><br></pre></td></tr></table></figure>

<h2 id="2-4-Business-User-Value"><a href="#2-4-Business-User-Value" class="headerlink" title="2.4 Business&#x2F;User Value"></a>2.4 Business&#x2F;User Value</h2><ul>
<li>Accurate character count, avoids UI bugs.</li>
<li>Supports i18n and emoji, better product reach.</li>
</ul>
<h2 id="2-5-Common-Confusion"><a href="#2-5-Common-Confusion" class="headerlink" title="2.5 Common Confusion"></a>2.5 Common Confusion</h2><ul>
<li>String.count &#x3D; character count, NSString.length &#x3D; UTF-16 units.</li>
<li>Some emoji&#x2F;special chars count as 2 in NSString.length.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://roy-luoyao.github.io/2025/07/17/iOS/String%E9%95%BF%E5%BA%A6%E8%8E%B7%E5%8F%96/" data-id="cmdcsgd4b000df3k7eoql8vqe" data-title="è·å–ä¸€ä¸ªStringçš„é•¿åº¦" class="article-share-link"><span class="fa fa-share">åˆ†äº«</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-iOS/Swift_OCå¯¹æ¯”" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/17/iOS/Swift_OC%E5%AF%B9%E6%AF%94/" class="article-date">
  <time class="dt-published" datetime="2025-07-16T16:00:00.000Z" itemprop="datePublished">2025-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/07/17/iOS/Swift_OC%E5%AF%B9%E6%AF%94/">Swiftä¸OCå¯¹æ¯”</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-ä¸­æ–‡ç­”æ¡ˆ"><a href="#1-ä¸­æ–‡ç­”æ¡ˆ" class="headerlink" title="1. ä¸­æ–‡ç­”æ¡ˆ"></a>1. ä¸­æ–‡ç­”æ¡ˆ</h1><h2 id="1-1-è¯­æ³•ä¸ç‰¹æ€§"><a href="#1-1-è¯­æ³•ä¸ç‰¹æ€§" class="headerlink" title="1.1 è¯­æ³•ä¸ç‰¹æ€§"></a>1.1 è¯­æ³•ä¸ç‰¹æ€§</h2><ul>
<li>Swiftï¼šå¼ºç±»å‹ã€ç±»å‹æ¨æ–­ã€Optionalsã€å€¼ç±»å‹ã€å‡½æ•°å¼ç¼–ç¨‹ã€‚</li>
<li>OCï¼šåŠ¨æ€ç±»å‹ã€æ¶ˆæ¯æœºåˆ¶ã€æŒ‡é’ˆã€æ‰‹åŠ¨å†…å­˜ç®¡ç†ã€‚</li>
</ul>
<h2 id="1-2-ä»£ç ç¤ºä¾‹"><a href="#1-2-ä»£ç ç¤ºä¾‹" class="headerlink" title="1.2 ä»£ç ç¤ºä¾‹"></a>1.2 ä»£ç ç¤ºä¾‹</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr <span class="operator">=</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] <span class="comment">// Swift</span></span><br><span class="line"><span class="type">NSArray</span> <span class="operator">*</span>arr <span class="operator">=</span> @[@<span class="number">1</span>,@<span class="number">2</span>,@<span class="number">3</span>]; <span class="comment">// OC</span></span><br></pre></td></tr></table></figure>

<h2 id="1-3-ä¸šåŠ¡åœºæ™¯"><a href="#1-3-ä¸šåŠ¡åœºæ™¯" class="headerlink" title="1.3 ä¸šåŠ¡åœºæ™¯"></a>1.3 ä¸šåŠ¡åœºæ™¯</h2><ul>
<li>Swift é€‚åˆæ–°é¡¹ç›®ã€ç±»å‹å®‰å…¨è¦æ±‚é«˜ã€‚</li>
<li>OC é€‚åˆç»´æŠ¤è€é¡¹ç›®ã€åŠ¨æ€ç‰¹æ€§éœ€æ±‚ã€‚</li>
</ul>
<h2 id="1-4-æ˜“æ··æ·†ç‚¹"><a href="#1-4-æ˜“æ··æ·†ç‚¹" class="headerlink" title="1.4 æ˜“æ··æ·†ç‚¹"></a>1.4 æ˜“æ··æ·†ç‚¹</h2><ul>
<li>Swift æ›´å®‰å…¨ä½†æ›´ä¸¥æ ¼ï¼ŒOC çµæ´»ä½†æ˜“å‡ºé”™ã€‚</li>
<li>Swift ä¸ OC å¯æ··ç¼–ã€‚</li>
</ul>
<h2 id="1-5-æ·±æŒ–è¿½é—®"><a href="#1-5-æ·±æŒ–è¿½é—®" class="headerlink" title="1.5 æ·±æŒ–è¿½é—®"></a>1.5 æ·±æŒ–è¿½é—®</h2><ul>
<li>Swift æ€§èƒ½ä¼˜åŒ–ç‚¹ï¼ŸARCã€COWã€æ³›å‹ã€‚</li>
<li>OC åŠ¨æ€ç‰¹æ€§ä¼˜åŠ¿ï¼Ÿè¿è¡Œæ—¶æ³¨å…¥ã€KVC&#x2F;KVOã€‚</li>
</ul>
<h1 id="2-English-Answer"><a href="#2-English-Answer" class="headerlink" title="2. English Answer"></a>2. English Answer</h1><h2 id="2-1-Syntax-Features"><a href="#2-1-Syntax-Features" class="headerlink" title="2.1 Syntax &amp; Features"></a>2.1 Syntax &amp; Features</h2><ul>
<li>Swift: strong type, inference, optionals, value type, functional.</li>
<li>OC: dynamic type, messaging, pointer, manual memory.</li>
</ul>
<h2 id="2-2-Code-Example"><a href="#2-2-Code-Example" class="headerlink" title="2.2 Code Example"></a>2.2 Code Example</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr <span class="operator">=</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] <span class="comment">// Swift</span></span><br><span class="line"><span class="type">NSArray</span> <span class="operator">*</span>arr <span class="operator">=</span> @[@<span class="number">1</span>,@<span class="number">2</span>,@<span class="number">3</span>]; <span class="comment">// OC</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3-Business-Scenarios"><a href="#2-3-Business-Scenarios" class="headerlink" title="2.3 Business Scenarios"></a>2.3 Business Scenarios</h2><ul>
<li>Swift: new project, type safety.</li>
<li>OC: legacy, dynamic needs.</li>
</ul>
<h2 id="2-4-Common-Confusions"><a href="#2-4-Common-Confusions" class="headerlink" title="2.4 Common Confusions"></a>2.4 Common Confusions</h2><ul>
<li>Swift safer but stricter, OC flexible but risky.</li>
<li>Swift&#x2F;OC can mix.</li>
</ul>
<h2 id="2-5-Deep-Dive"><a href="#2-5-Deep-Dive" class="headerlink" title="2.5 Deep Dive"></a>2.5 Deep Dive</h2><ul>
<li>Swift perf: ARC, COW, generics.</li>
<li>OC dynamic: runtime, KVC&#x2F;KVO.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://roy-luoyao.github.io/2025/07/17/iOS/Swift_OC%E5%AF%B9%E6%AF%94/" data-id="cmdcsgd4c000ff3k7gsyp4eqh" data-title="Swiftä¸OCå¯¹æ¯”" class="article-share-link"><span class="fa fa-share">åˆ†äº«</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-iOS/SwiftUIæ ¸å¿ƒæœºåˆ¶ä¸ä¸šåŠ¡ä»·å€¼" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/17/iOS/SwiftUI%E6%A0%B8%E5%BF%83%E6%9C%BA%E5%88%B6%E4%B8%8E%E4%B8%9A%E5%8A%A1%E4%BB%B7%E5%80%BC/" class="article-date">
  <time class="dt-published" datetime="2025-07-16T16:00:00.000Z" itemprop="datePublished">2025-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/07/17/iOS/SwiftUI%E6%A0%B8%E5%BF%83%E6%9C%BA%E5%88%B6%E4%B8%8E%E4%B8%9A%E5%8A%A1%E4%BB%B7%E5%80%BC/">SwiftUI æ ¸å¿ƒæœºåˆ¶ä¸ä¸šåŠ¡ä»·å€¼</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-ä¸­æ–‡ç­”æ¡ˆ"><a href="#1-ä¸­æ–‡ç­”æ¡ˆ" class="headerlink" title="1. ä¸­æ–‡ç­”æ¡ˆ"></a>1. ä¸­æ–‡ç­”æ¡ˆ</h1><h2 id="1-1-æ¦‚å¿µä¸æœºåˆ¶"><a href="#1-1-æ¦‚å¿µä¸æœºåˆ¶" class="headerlink" title="1.1 æ¦‚å¿µä¸æœºåˆ¶"></a>1.1 æ¦‚å¿µä¸æœºåˆ¶</h2><p>SwiftUI æ˜¯è‹¹æœæ¨å‡ºçš„å£°æ˜å¼ UI æ¡†æ¶ï¼Œæ ¸å¿ƒæ˜¯ View åè®®ã€çŠ¶æ€é©±åŠ¨ã€æ•°æ®ç»‘å®šï¼ˆ@State&#x2F;@Binding&#x2F;@ObservedObjectï¼‰ã€‚</p>
<h2 id="1-2-ä»£ç ç¤ºä¾‹"><a href="#1-2-ä»£ç ç¤ºä¾‹" class="headerlink" title="1.2 ä»£ç ç¤ºä¾‹"></a>1.2 ä»£ç ç¤ºä¾‹</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> count <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;ç‚¹å‡»<span class="subst">\(count)</span>&quot;</span>) &#123; count <span class="operator">+=</span> <span class="number">1</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-3-ä¸šåŠ¡åœºæ™¯"><a href="#1-3-ä¸šåŠ¡åœºæ™¯" class="headerlink" title="1.3 ä¸šåŠ¡åœºæ™¯"></a>1.3 ä¸šåŠ¡åœºæ™¯</h2><ul>
<li>è·¨å¹³å° UIã€åŠ¨æ€ä¸»é¢˜ã€å“åº”å¼äº¤äº’ã€‚</li>
</ul>
<h2 id="1-4-æ˜“æ··æ·†ç‚¹"><a href="#1-4-æ˜“æ··æ·†ç‚¹" class="headerlink" title="1.4 æ˜“æ··æ·†ç‚¹"></a>1.4 æ˜“æ··æ·†ç‚¹</h2><ul>
<li>SwiftUI ä¸æ˜¯ UIKit å°è£…ï¼Œå®Œå…¨å£°æ˜å¼ã€‚</li>
<li>çŠ¶æ€é©±åŠ¨ï¼ŒUI è‡ªåŠ¨åˆ·æ–°ã€‚</li>
</ul>
<h2 id="1-5-æ·±æŒ–è¿½é—®"><a href="#1-5-æ·±æŒ–è¿½é—®" class="headerlink" title="1.5 æ·±æŒ–è¿½é—®"></a>1.5 æ·±æŒ–è¿½é—®</h2><ul>
<li>SwiftUI æ€§èƒ½ä¼˜åŒ–ï¼ŸView ç»“æ„æ‰å¹³åŒ–ã€@StateObjectã€‚</li>
<li>ä¸šåŠ¡ä»·å€¼ï¼Ÿæå¤§æå‡å¼€å‘æ•ˆç‡ã€å¯ç»´æŠ¤æ€§ã€‚</li>
</ul>
<h1 id="2-English-Answer"><a href="#2-English-Answer" class="headerlink" title="2. English Answer"></a>2. English Answer</h1><h2 id="2-1-Concept-Mechanism"><a href="#2-1-Concept-Mechanism" class="headerlink" title="2.1 Concept &amp; Mechanism"></a>2.1 Concept &amp; Mechanism</h2><p>SwiftUI is Appleâ€™s declarative UI framework: View protocol, state-driven, data binding (@State&#x2F;@Binding&#x2F;@ObservedObject).</p>
<h2 id="2-2-Code-Example"><a href="#2-2-Code-Example" class="headerlink" title="2.2 Code Example"></a>2.2 Code Example</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_ inherited__">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> count <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;Click <span class="subst">\(count)</span>&quot;</span>) &#123; count <span class="operator">+=</span> <span class="number">1</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-3-Business-Scenarios"><a href="#2-3-Business-Scenarios" class="headerlink" title="2.3 Business Scenarios"></a>2.3 Business Scenarios</h2><ul>
<li>Cross-platform UI, dynamic theme, reactive interaction.</li>
</ul>
<h2 id="2-4-Common-Confusions"><a href="#2-4-Common-Confusions" class="headerlink" title="2.4 Common Confusions"></a>2.4 Common Confusions</h2><ul>
<li>SwiftUI is not UIKit wrapper, fully declarative.</li>
<li>State-driven, UI auto-refresh.</li>
</ul>
<h2 id="2-5-Deep-Dive"><a href="#2-5-Deep-Dive" class="headerlink" title="2.5 Deep Dive"></a>2.5 Deep Dive</h2><ul>
<li>SwiftUI perf optimization? Flat view, @StateObject.</li>
<li>Business value? Boosts dev efficiency, maintainability.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://roy-luoyao.github.io/2025/07/17/iOS/SwiftUI%E6%A0%B8%E5%BF%83%E6%9C%BA%E5%88%B6%E4%B8%8E%E4%B8%9A%E5%8A%A1%E4%BB%B7%E5%80%BC/" data-id="cmdcsgd4d000hf3k7aq950y2m" data-title="SwiftUI æ ¸å¿ƒæœºåˆ¶ä¸ä¸šåŠ¡ä»·å€¼" class="article-share-link"><span class="fa fa-share">åˆ†äº«</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/">ä¸‹ä¸€é¡µ &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">åˆ†ç±»</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½’æ¡£</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/07/">ä¸ƒæœˆ 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/07/18/iOS/%E6%9C%AA%E6%9D%A5%E8%B6%8B%E5%8A%BF%E4%B8%8E%E4%B8%AA%E4%BA%BA%E6%88%90%E9%95%BF%E5%BB%BA%E8%AE%AE/">(no title)</a>
          </li>
        
          <li>
            <a href="/2025/07/17/iOS/CopyOnWrite/">Copy-on-writeï¼ˆCOWï¼‰</a>
          </li>
        
          <li>
            <a href="/2025/07/17/iOS/Error%E5%85%BC%E5%AE%B9NSError/">Errorå…¼å®¹NSError</a>
          </li>
        
          <li>
            <a href="/2025/07/17/iOS/KVC_KVO/">KVCä¸KVO</a>
          </li>
        
          <li>
            <a href="/2025/07/17/iOS/OpenPublic%E5%8C%BA%E5%88%AB/">Openä¸Publicçš„åŒºåˆ«</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap"></div>
  <h3 class="widget-title">Luo Yaoçš„ç®€å†</h3>
  <div class="widget">
    <a href="/resume.pdf" target="_blank">ç‚¹å‡»æŸ¥çœ‹Luo Yaoçš„ç®€å†</a>
  </div>
</div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 Roy Luo Yao<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>